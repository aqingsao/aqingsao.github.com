---
layout: post
title: '打造一致的工作环境'
keywords: "Agile, development environment"
description: development environment for agile team
category: Agile
tags: [Agile]

---

对强调消除浪费、提高效率的团队来说，保持一致的工作环境非常重要。工作环境不仅仅包括开发环境，也包括软件交付团队日常打交道的各种设施，比如工作目录、版本控制工具、敏捷团队的故事墙等等。这里，我们参考丰田精益的5S，对需要整理的环境进行一个总结，供大家搭建自己的工作环境时参考：

###1、 工作目录###
工作目录是指开发中用到的项目、软件、参考资料等在电脑硬盘中的存放位置。通常来说，我们要把它们放在相同的工作目录。

####1.1 项目工程####
比如都放到D:\work\myProject下，这样会利于继承开发环境（IDE）的管理。

####1.2 相关资料，如果无法放到版本控制工具，也要放到相同的目录####
比如下载的软件都放到D:\downloads目录下，第三方开源软件的源码都放到D:\3rdparty目录下。要在所有开发机器上保持一致，这样便于任何一位开发人员查找、共享相关资料。最重要的一点是要确保大小写也是一致的，相信我，这会给你少惹很多麻烦。

###2、集成开发环境（IDE）###
你是否有过这样的经验，其它机器上能编译通过的代码，本地编译不过；其它机器上成功的测试，本地确实失败的。查来查去，发现是环境或者配置问题。在越来越倚重IDE的今天，保持它的一致非常重要。

####2.1 使用相同的IDE、插件和快捷键####
对IDE，不同人会有不同的偏好，但对一个团队来说，还是要达成一致，选择最适合的一个。同时保持大家使用一样的快捷键和插件。否则，当大家交换结对时，需要在不同的上下文中切换，会影响开发效率。

####2.2 使用相同的工程文件和模版文件####
工程文件，比如IDEA的.ipr和iml文件等，用来保存项 目工程的组织结构、类库信息等等。而模板文件，比如文件模板和代码风格模板，这有利于整个团队保持一致的代码风格。把工程文件和模版文件保存在版本控制工具中，一旦某个人做了修改，每个机器上都可以及时更新，省去了单独配置的麻烦。

###3、项目依赖的类库###
同种类型的类库，只选择一种。有的时候，这很容易选择，比如用于测试的mock框架，如果同时使用EasyMock和Mockito，可以选择Mockito。而有时，类库并没有明显的优劣，或者项目中同一类库使用了不同的版本，可以由团队自行决定选择其一。
在有些遗留系统中，这种现象比较多，比如我正在工作的一个项目，是超过10年的遗留系统。在其众多项目中，同时用到了单元测试框架JUnit3/JUnit4/TestNG, Mock框架EasyMock/Mockito/PowerMock；Spring2.5/Spring3等等。可以通过技术白卡的方式，逐渐对它们进行清理。新项目这种情况会少一些，但出现了也要及时清理掉，除非你愿意它变成遗留系统。

###4、清理版本控制工具###
版本控制工具（VCS）是开发团队的必备工具，但时间长了，难免会出现垃圾：多余的文件、混乱的目录结构等等。有些冗余文件很好识别，比如编译或构建过程产生的中间文件，可以把它们删掉让版本控制工具瘦身。目录结构也可以重新清理，以让大家方便的查找。
除了这些，大家通常容易忽略的一个问题是，某些文件也应该放到VCS中，比如前面提到的工程文件和模版文件等等。通过VCS管理，可以让一个人的修改迅速应用到所有开发人员的机器上。
使用VCS时，有两个典型的坏味道：很多文件只在本地，被加入到忽略列表中；很多文件在本地做了修改，与VCS中的不同。一个典型的例子是用于测试的属性文件，由于需要配置不同的数据库连接信息，所以本地会与VCS中的不同。出现这些味道，就是项目可以优化的地方。

###5、自动化脚本###
好的团队善于利用脚本，把重复的操作自动化起来。它是面向整个团队的，所以不要出现某个人写后只有一个人偷偷在用的情况，要勇于向整个团队共享。并且用版本控制工具管理起来，利于以后脚本的修改。

###6、 故事墙###
敏捷团队用故事墙反映当前的交付状态，是团队的脸面所在，所以需要经常洗漱打扮、擦脂抹粉。

####6.1 只保留当前迭代的卡片####
就像你不会在夏天把棉衣挂在客厅里，同样也不要把上一个迭代甚至几个迭代前已经做完的卡片还留在故事墙上。

####6.2 及时更新故事卡片的状态####
关心的人通过故事墙了解到当前状态，所以故事墙的状态要是正确的、让人信任的。故事的状态发生变化，卡片要及时移动。

####6.3 清理Block状态的卡片####
Block状态的卡片一般是故事墙上寿命最长的卡片，有时会横跨几个迭代。可能半年过去了，对Block卡片仍然力所不及，也可能，大家根本忘了这张卡。所以定期检查，要么解决之，要么抛弃之。

####6.4 装饰故事墙及状态墙####
如果团队足够幸运的话，拥有一面很大的墙，除了常用的故事墙（故事卡片状态、燃尽图等等），还会把它用做团队内部交流的session墙、用于展示团队风貌的照片墙等等，对它们也要经常清理，维护内容的新鲜，会让团队成员保持很高的关注度。

###7、清理代码###
什么是简洁代码，如何重构，书籍或者文章多如牛毛，这里我只提3点。

####7.1 删除被注释的代码####
你可能把代码注释掉，希望有朝一日重新使用它们，或者你有时看到别人注释掉的代码。但事实上，维护的人换了一茬又一茬，已经没有人知道为什么被注释，这些代码也永无出头之日了。大胆地删掉它们吧，何况，我们有版本控制工具呢。

####7.2 清理TODO项####
在代码中加一些TODO项，你可能是想提醒自己或者别人，有一些事情还需要做。我当前的团队就存在这样的问题，大家写了一些TODO，但后来发现永远不会再理会它们。所以要全部找出来：要么做掉，要么删掉。7.3 命名中的大小写问题
即使团队有编码规范，有命名规范，大小写仍然是值得注意的问题。注意的好，能够明显减少代码的混乱程度。

###8. 用户名密码###
开发人员每天都要重复无数次的动作是：输入用户名、密码。这可能是在登录另外一台电脑、连接数据库、连接版本控制工具等等。如果其数量众多，每个人不得不记住很多用户名、密码。绝大多数时候，这不会涉及公司的核心机密，也不会带来明显的信息安全，不妨让整个团队使用相同的密码。

要打造一致的工作环境，我们常用的做法是，开发初期，首先搭建一个基本的开发环境（Dev Box），做成镜像之后，克隆到其它的开发机器。但是随着项目的进行，不同机器上的开发环境差别会越来越大，并逐渐积累出一些小的问题，如果不及时解决，对开发效率会造成较大的影响。所以，这不是一蹴而就的事情，需要在开发的过程中时刻注意，或者定期进行清理。相信在一致环境下工作的团队，会取得更高的效率
